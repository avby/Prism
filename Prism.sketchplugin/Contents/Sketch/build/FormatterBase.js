// Generated by CoffeeScript 1.12.7

/*
 FormatterBase

 Base class for each type of formatters. Template Pattern.
 the ID must be unique, the name is a human readable mini description, the format is used to use a custom file extension when saving colors to a file
 */
var FormatterBase;

FormatterBase = (function() {
  function FormatterBase() {}

  FormatterBase.EXPORT_TYPE_FILE = "file";

  FormatterBase.EXPORT_TYPE_FILES = "files";


  /*
   id
  
   Override this at Subclass.
   */

  FormatterBase.prototype.id = function() {};


  /*
   name
  
   Uses format name on modal panel. Override this at Subclass.
   */

  FormatterBase.prototype.name = function() {};


  /*
   format
  
   Uses default file name when its saved. Override this at Subclass.
   This method will be called only `type` returns `EXPORT_TYPE_FILE`.
   */

  FormatterBase.prototype.format = function() {};


  /*
   type
  
   `EXPORT_TYPE_FILE` or `EXPORT_TYPE_FILES`. Override this at Subclass.
   `EXPORT_TYPE_FILE` means 1 file will be exported. and Prism shows Save dialog.
   `EXPORT_TYPE_FILES` means several files will be exported. Prism shows dialog to get export directory.
   */

  FormatterBase.prototype.type = function() {
    return this.constructor.EXPORT_TYPE_FILE;
  };


  /*
   supportClipboard
  
   If format supports clipboard then returns `true`. Text format should better support this basically.
   If your format is binary then should return `false`.
   */

  FormatterBase.prototype.supportClipboard = function() {
    return true;
  };


  /*
   formatText
  
   Converts a Color Dictionary to String. Override this at Subclass.
   The commented flag is used to add comments (like when we export colors)
   or removing them (like when we are populating the cell layers with color data)
   */

  FormatterBase.prototype.formatText = function(color, commented) {};


  /*
   formatTextFromColorDictionaries
  
   Converts Color Dictionaries to String. Override this at Subclass if needs.
   */

  FormatterBase.prototype.formatTextFromColorDictionaries = function(colorDictionaries) {
    var allColorsString, colorDictionary, i, len, lines;
    lines = [];
    for (i = 0, len = colorDictionaries.length; i < len; i++) {
      colorDictionary = colorDictionaries[i];
      lines.push(this.formatText(colorDictionary, true));
    }
    return allColorsString = lines.join("\n");
  };


  /*
   writeStringToFile
  
   Writes String type format as file. Override this at Subclass if needs.
   */

  FormatterBase.prototype.writeStringToFile = function(filePath, string) {
    var fileString;
    fileString = NSString.stringWithString(string);
    return fileString.writeToFile_atomically_encoding_error(filePath, true, NSUTF8StringEncoding, null);
  };


  /*
   exportAsFile
  
   Writes format as file. Override this at Subclass if needs.
   */

  FormatterBase.prototype.exportAsFile = function(colorDictionaries, url) {
    var text;
    text = this.exportAsString(colorDictionaries);
    return this.writeStringToFile(url.path(), text);
  };


  /*
   exportAsString
  
   Converts Color Dictionaries to String. Override this at Subclass if needs.
   */

  FormatterBase.prototype.exportAsString = function(colorDictionaries) {
    var text;
    return text = this.formatTextFromColorDictionaries(colorDictionaries);
  };

  return FormatterBase;

})();
